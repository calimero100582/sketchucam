<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title> SketchUcam parameters</title>
<style type="text/css">
<!--
body {
   background-color: #ebe9ed;
   }
td.buttons {
   font-family: Verdana, Arial, Helvetica, Sans-serif;
   text-align: center;
   font-size: 0.85em;
   }
td {
   font-family: Verdana, Arial, Helvetica, Sans-serif;
   padding: 1.5px;
   }
td.caption{
   text-decoration: none;
   font-size: 0.80em;
   text-align: right;
   }
.button {
   font-family: Verdana, Arial, Helvetica, Sans-serif;
   font-size: 0.9em;
   margin: 1px;
   padding: 2px;
   }

tr.profile { 
   background-color: #dbd9dd; 
   }

td.tooltip {outline:none; }
td.tooltip strong {line-height:30px;}
td.tooltip:hover {text-decoration: none;}
td.tooltip span { z-index:10; display:none; padding:2px 2px; top:480px; left:255px; width:275px; font-size: smaller; }
td.tooltip:hover span{ display:inline; position:absolute; color:#111; border:1px solid #DCA; background:#ffCE9F;}
-->
  </style>
</head>
<body>
   <p><a href="mailto:phlatboyz@phlatboyz.com">
      <img style="border: 0px solid ; width: 400px; height: 130px; margin-left: auto; margin-right: auto; display: block;"
         alt="SketchUCam" src="images/SketchUcam-Window-Logo.png">
   </a>
   </p>
<form name="param_form" action="#" style="margin-left: auto; margin-right: auto;">
  
  <table border="0" cellspacing="0" style="margin-left: auto; margin-right: auto;">
    <tbody>
    <tr class="profile">
       <td colspan="4" class="buttons">
         <Span  style="float: right;"><b>Profiles</b>
         <input name="checkbox_hidden" id="checkbox_hidden" value="" type="hidden">
         <input value="Load"     onclick="callPhlatboyz('pload')" class="button" type="button">
         <input value="Save"     onclick="callPhlatboyz('psave')" class="button"  type="button">
         <input value="Delete"   onclick="callPhlatboyz('pdelete')" class="button"  type="button">
         <input name="metric_hidden" id="metric_hidden" value="" type="hidden">
         </span>
       </td>
    </tr>

      <tr>
        <td width="45%" id="spindlespeed_id" class="caption">&nbsp;</td>
        <td width="10%" class="tooltip"><input name="spindlespeed" id="spindlespeed" value=""  type="text" size="8" onchange="calcfz()">
         <span>Spindle speed for cutting</span></td>
        <td width="40%" class="caption tooltip" id="SFM">&nbsp;<span>Cutting Speed</span></td>
        <td width="10%" class="caption tooltip" id="fz">&nbsp;<span>Feed Per Tooth</span></td>
      </tr>

      <tr>
        <td id="feedrate_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="feedrate" id="feedrate" value=""  type="text" size="8" onchange="calcfz()">
         <span>Cutting feedrate in units/min</span></td>
        <td id="plungerate_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="plungerate" id="plungerate" value=""  type="text" size="8"><span>Vertical down Z moves will use this rate</span></td>
      </tr>

      <tr>
        <td id="materialthickness_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="materialthickness" id="materialthickness" value=""  type="text" size="8"><span>Nominal material thickess</span></td>
        <td id="mustramp_id" class="caption" style="border-top: 1px solid black; border-left: 1px solid black;">&nbsp;</td>        
        <td class="tooltip"                  style="border-top: 1px solid black; border-right: 1px solid black"><input name="mustramp" id="mustramp" value=""  type="checkbox"><span>Ramp instead of Plunge</span></td>
       </tr>
      <tr>
        <td id="cutfactor_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="cutfactor" id="cutfactor" value=""  type="text" size="8"><span>Percentage of material thickness to cut</span></td>
        <td id="rampangle_id" class="caption"  style="border-bottom: 1px solid black; border-left: 1px solid black;">&nbsp;</td>
        <td class="tooltip"                    style="border-bottom: 1px solid black; border-right: 1px solid black;"><input name="rampangle" id="rampangle" value=""  type="text" size="8"><span>Ramp angle limit in degrees.<br>0 is no limit, max is 44</span></td>
      </tr>
      <tr>
        <td id="bitdiameter_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="bitdiameter" id="bitdiameter" value=""  type="text" size="8" onchange='calcsfm()'>
         <span>Cutting bit diameter, set before creating cut lines</span></td>
        <td id="stepover_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="stepover" id="stepover" value=""  type="text" size="8"><span>Percentage of bitdiameter to step over</span></td>
      </tr>
      <tr>
        <td id="tabwidth_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="tabwidth" id="tabwidth" value=""  type="text" size="8"><Span>Width of tabs, allow for bit diameter</Span></td>
        <td id="tabdepthfactor_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="tabdepthfactor" id="tabdepthfactor" value=""  type="text" size="8"><span>How much material to remove in a tab</span></td>
      </tr>
<!--
<tr>
<td id="vtab_id" class="caption">&nbsp;</td>
<td class="tooltip"><input type="checkbox" name="vtab" value="vtab" /></td>
</tr>
-->

      <tr>
        <td id="safetravel_id" class="caption" style="padding-top: 10px;">&nbsp;</td>
        <td class="tooltip" style="padding-top: 10px;"><input name="safetravel" id="safetravel" value=""  type="text" size="8"><span>Height above material to rapid safely</span></td>
        <td id="multipass_id" class="caption" style="padding-top: 10px;">&nbsp;</td>
        <td class="tooltip" style="padding-top: 10px;"><input name="multipass" id="multipass" type="checkbox">&nbsp;<span>Use multipass for hard materials</span></td>
      </tr>


      <tr>
        <td id="safewidth_id" class="caption">&nbsp;</td>
        <td class="tooltip" ><input name="safewidth" id="safewidth" value=""  type="text" size="8"><span>Safe size of material on X</span></td>
        <td id="multipassdepth_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="multipassdepth"  id="multipassdepth" value=""  type="text" size="8"><span>Depth of cut for each pass</span></td>
      </tr>
      
      <tr>
        <td id="safeheight_id" class="caption" >&nbsp;</td>
        <td class="tooltip" ><input name="safeheight" id="safeheight" value=""  type="text" size="8"><span>Safe size of material on Y</span></td>
      </tr>

      <tr>
        <td id="overheadgantry_id" class="caption" style="padding-top: 10px;">&nbsp;</td>
        <td class="tooltip" style="padding-top: 10px;"><input name="overheadgantry" id="overheadgantry" value=""  type="checkbox"><span>Sets direction of cuts,<br>ticked = outside cut is anticlockwise,<br>unticked = clockwise</span></td>
        <td id="tabletop_id" class="caption" style="padding-top: 10px;">&nbsp;</td>        
        <td class="tooltip" style="padding-top: 10px;"><input name="tabletop" id="tabletop" value=""  type="checkbox"><span>Table top is Z-Zero instead of material top</span></td>

      </tr>
      
<tr>
        <td id="laser_id" class="caption">&nbsp;</td>
        <td class="tooltip" ><input name="laser" id="laser" value=""  type="checkbox"><span>Turns on Laser engraving control Gcode</span></td>
        <td id="servo_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="servo" id="servo" value=""  type="checkbox"><span>Servo pen control: set up and down positions in options.</span></td>
</tr>      
<tr>
        <td id="gen3D_id" class="caption">&nbsp;</td>
        <td class="tooltip"><input name="gen3D" id="gen3D" value=""  type="checkbox"><span>Generate a 3D cut path over a 3D object</span></td>
</tr>        
     

      <tr>
        <td id="showgplot_id" class="caption" style="padding-top: 10px;">&nbsp;</td>
        <td class="tooltip" style="padding-top: 10px;"><input name="showgplot" id="showgplot" value=""  type="checkbox"><span>Launch Gplot after generating G-code</span></td>
        
      </tr>

      <tr>
        <td id="commenttext_id" class="caption">&nbsp;</td>
        <td colspan=3><textarea name="commenttext" rows="4" cols="40"></textarea></td>
      </tr>
      <tr>
         <td colspan="3" class="buttons" valign="top">
            <input  value="OK" onclick="callPhlatboyz('save')" class="button" type="button">
            <input value="Cancel"  onclick="callPhlatboyz('cancel')" class="button"  type="button">
            <input value="Restore Defaults"  onclick="callPhlatboyz('restore_defaults')" class="button"  type="button">
         </td>
         <td width="200" colspan="1" id="version_id" class="caption" >&nbsp;</td>      
         </tr>
    </tbody>
  </table>
</form>

	<script type='text/javascript'>
        function callPhlatboyz(action) {
            window.location.href = 'skp:phlatboyz_action_callback@' + action;
        }
        function setFormValue(formId, value) {
            param_form.elements[formId].value = value;
        }
        function setFormCaption(formId, value) {
            document.getElementById(formId).innerHTML = value;
        }
        function setEncodedFormValue(formId, value, delim) {
            str_arr = value.split(delim);
            param_form.elements[formId].value = str_arr.join("\n");
        }
        function setCheckbox(formId, value) {
            if (value == 'false') {
                param_form.elements[formId].checked = false
            } else {
                param_form.elements[formId].checked = true
            }
        }
        function isChecked(formId) {
            param_form.elements["checkbox_hidden"].value = (param_form.elements[formId].checked) ? "true" : "false";
        }
        function hideMultipass() {
            document.getElementById("multipass_row1").style.display = 'none';
        }
        function calcfz()
           {
           try
              {
              var theform =  document.forms["param_form"];
              var feed = theform.elements["feedrate"];
              if (feed.value != "")
                 feed = parseFloat(feed.value);
              else 
                 feed = 0.1;
              var rpm = theform.elements["spindlespeed"];
              if (rpm.value != "")
                 rpm = parseFloat(rpm.value);
              else
                 rpm = 1;

              if (feed < 0)
                 {
                 theform.elements["feedrate"].value = -feed; 
                 feed = -feed;
                 }
                 
              if (rpm < 0)
                 {
                 theform.elements["spindlespeed"].value = -rpm; 
                 rpm = -rpm;
                 }
              
              var rpm1 = feed / (rpm * 1);
              var rpm2 = feed / (rpm * 2);
              var rpm4 = feed / (rpm * 4);
              
              document.getElementById("fz").innerHTML = rpm1.toFixed(3) +' '+ rpm2.toFixed(3) +' '+rpm4.toFixed(3) +'<span>Feed Per Tooth for 1, 2 and 4 teeth</span>';
              calcsfm();
              }
           catch(err)
            {
            document.getElementById("fz").innerHTML = 'ERROR' +'<span>Feed Per Tooth for 1, 2 and 4 teeth</span>';
            }
           }
        function calcsfm()
           {
           var theform =  document.forms["param_form"];
           var rpm = theform.elements["spindlespeed"];
           if (rpm.value != "")
              rpm = parseFloat(rpm.value);
           else
              rpm = 0;
           var dia = theform.elements["bitdiameter"];
           if (dia.value != "")
              dia = parseFloat(dia.value);
           else
              dia = 0; 

           if (rpm < 0)
              {
              theform.elements["spindlespeed"].value = -rpm; 
              rpm = -rpm;
              }
           if (dia < 0)
              {
              theform.elements["bitdiameter"].value = -dia; 
              dia = -dia;
              }
              
           var metric = theform.elements["metric_hidden"];
           if (metric.value == 'true')
              {
              var sfm = (3.1415 * dia * rpm) / 1000;
              document.getElementById("SFM").innerHTML = sfm.toFixed(2) + ' M/min' +' <span>Cut Speed (SFM or M/Min)</span>';
              }
           else
              {
              var sfm = (3.1415 * dia * rpm) / 12;
              document.getElementById("SFM").innerHTML = sfm.toFixed(2) +' ft/min' +' <span>Cut Speed (SFM or M/Min)</span>';
              }
           }
    </script>
	<script type="text/javascript">
		callPhlatboyz('load_params');
      calcfz();
	</script>
</body>
</html>
