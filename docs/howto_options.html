<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>SketchUcam: HOWTO set default options</title>
<meta name="id" content="$Id$">
<link type="text/css" rel="stylesheet" href="style.css">
<style type="text/css">
   dt {
      margin-top: 7px;
      font-size: smaller;
      }
   body {
      min-width: 600px;
      }
</style>

</head>
<body>


<div class="shell">

<br>
<div class="intro-name">Phlatboyz SketchUcam(PhlatScripT)</div>
<hr width="100%">
<div class="intro">
<span style="float: right;"><a href="index.html">Back to help index</a></span>
<h2>HOWTO set default options</h2>

<div  style="background-color: cyan;">
<p>
Please note that this mechanism supercedes the Constants.rb and MyConstants.rb files.  However, DO NOT DELETE ANY FILES.<br>
Current settings in Constants.rb and MyConstants.rb will be honored but overridden by this new settings mechanism, but the Constants.rb file is still <b>required</b> so please do not delete it.
</p>
</div>

<p>
<img alt="" src="images/options.png" style="float: right;">
SketchUcam system has long had a file called Constants.rb which contains
a long list of constant values.  Some of them are used only by the system and are not user settable 
while others were designed to be user settings that you set once and forget.
</p>
<p>Current development of the system revealed that Constants.rb will be changing often as new features 
are added, thus presenting the problem of 'merging' the new file with your existing options such as default 
safe cut area and so on.
</p>
<p>

A new system had to be designed and the simplest is to have a secondary constants file in which you set your options.
However, this proved to be complicated by changes in Windows 7 and 8, differing paths in Mac and Linux, and other niggles.
</p>
<p>
Thus the new Options Menu is an evolution of this default options mechanism and allow a user to set default settings that affect
their computer or CNC machine  environment using simple menus as shown at right.
</p>
<hr>
<h2>The Options menu</h2>
<p>
The Options menu is found under Tools|PhlatBoyz|Options and comprises 5 items with subitems as follows:
</p>
<dl>
<dt><a href="#a1">Tool Options</a>
   <dd>Things affecting tools
<dt><a href="#a2">Misc Options</a>
   <dd>Miscallaneous things
<dt><a href="#a3">Machine Options</a>
   <dd>Things affecting your machine type and size
<dt><a href="#a4">Feature Options</a>
   <dd>Things you may want to change to get different G-code output options
<dt><a href="#a5">Hole Feature Options</a>   
   <dd>Options that affect plunge hole boring
<dt><a href="#a6">File Options</a>
   <dd>Default file naming options
</dl>
<br clear="all">
<hr>
<h2><a id="a1">Tool Options</a></h2>
<p>   
<img alt="" src="images/options-tool.png" style="float: right;">
These defaults will only be seen on new drawings.  
These settings should reflect your most commonly used cutting tool and material.
These settings can easily be overridden by using the Tool Profiles save and load mechanism.
</p>
<dl>
   <dt>Default_spindle_speed
      <dd>This sets the default 'S' word written to the G-code, which sets the spindle speed if your controller supports it.
   <dt>Default_feed_rate 
      <dd>This is the default cutting feed rate in current drawing units per minute.
   <dt>Default_plunge_rate 
      <dd>In hard materials you need a slower plunge feed rate, set it here in drawing units per minute.
   <dt>Default_safe_travel 
      <dd>Height above the workpiece where it is safe to move rapidly to the next cut.
   <dt>Default_material_thickness 
      <dd>The default material thickness in drawing units.
   <dt>Default_cut_depth_factor 
      <dd>Set this to 100% if you are using a table type machine, or 110 to 140% for a Phlatprinter.
   <dt>Default_bit_diameter 
      <dd> Set to your most commonly used bit size.
   <dt>Default_tab_width 
      <dd> Set to 3X your most common bit size.
   <dt>Default_tab_depth_factor 
      <dd>Experience will show you how much tab depth your prefer, set it here.
   <dt>Default_vtabs 
      <dd>Normal tabs have vertical edges, V-tabs ave sloped edges and allow the cutter to keep moving at a constant speed.
         By setting this to true the default tab style will be Vtab.  
         You can still change it while placing tabs with the END key.
   <dt>Default_fold_depth_factor 
      <dd>Your preferred fold depth factor in %.
   <dt>Default_pocket_depth_factor 
      <dd>Your preferred pocket depth factor in %.
   <dt>Default_pocket_direction 
      <dd>Set this to true to have pocket zigzags default to along Y axis, false for along X axis.
         This setting can be changed on the fly with the END key.
</dl>
<hr>
<h2><a id="a2">Misc Options</a></h2>
<p>
<img alt="" src="images/options-misc.png" style="float: right;">
</p>
<dl>
   <dt>Default_comment_remark
      <dd>A default text string for the Comment area of the parameters.  This will be written in the G-code header.
   <dt>Default_gen3d
      <dd>This is normally false since most use of SketchUcam is for 2.5D cutting.  
      Set to true if all you do is <a href="howto_3d.html">3D</a>.
   <dt>Default_show_gplot after output 
      <dd>Set this to true to have the gplot program open with your new G-code file EVERY TIME after generating G-code.
   <dt>Default_tabletop is Z-Zero 
      <dd>Set this TRUE if you want to always zero your tool to the table top instead of the material top.
      Phlatprinters must use the material top for Z-Zero (set this false), but all other machines can use the table top.
      If you fit an automatic tool zero sensor level with the table top, Mach3 and LinuxCNC make this very easy to use.
      Using the table as zero will also all you to generate G-code that can cut many thicknesses of material up to the maximum of the thickness you specified.
   <dt id="compat">Use_compatible_dialogs set TRUE if you cannot see the parameters dialog
      <dd>This one is rather obvious.  
      If the main Parameters Dialog shows up largely blank, you need to set this to true.
      Mac and Linux users will be most in need of this setting.   
      Linux users running Sketchup under WINE can work around this issue by installing 'winetricks' and then issuing the command 'winetricks ie8'.  
      This will install IE8 and allow the Parameters dialog to work correctly with this setting set to false.
</dl>   
<hr>
<h2><a id="a3">Machine Options</a></h2>
<p>
<img alt="" src="images/options-machine.png" style="float: right;">
These options set defaults taken from the size and shape of your CNC machine.  
If you have more than one machine, set these to the largest machines values and be careful when generating code for the smaller ones.
</p>
<dl>
   <dt>Default_safe_origin_x 
      <dd>   Normally 0, this is where the safe area is placed by default.
   <dt>Default_safe_origin_y 
      <dd>   Normally 0, this is where the safe area is placed by default.            
   <dt>Default_safe_width (X)
      <dd>Set this to the largest workpiece your machine can take in the X direction.
   <dt>Default_safe_height (Y) 
      <dd>Set this to the largest workpiece Y size.
   <dt>Default_overhead_gantry
      <dd>If all you have is a Phlatprinter, set this to false.
      If all you have is a gantry type machine, set this to true.
      If you have both styles, set to the one you use the most.
   <dt>Default_laser
      <dd>When set on the Laser style Gcode is the default
   <dt>Default_multipass
      <dd>Set TRUE if you most often do multipass cuts
   <dt>Default_multipass_depth 
      <dd>Set to your preferred multipass cut depth.  Note that you can optimize multipass cuts by calculating this figure
      so that the last pass is the same size as all other passes.
      <pre>cuts = Overcut%/100 * MatThickness / Multipassdepth</pre>
      will give you the number of passes at the current settings.  
      If there are any numbers after the decimal point there will be 1 extra pass with that fraction of the multipass depth as the cut depth.<br>
      For example
<pre>6mm material
2mm multipass depth
110% overcut
cuts = 110/100 * 6 / 2
cuts = 3.3</pre>
      will actually result in 4 passes, with the last pass being only 0.3*2 = 0.6mm deep.
      <p>To optimize</p>
      <ol>
      <li>Round the number of cuts UP if the material is hard, DOWN if the material is soft
      <li>3.3 becomes 4 (for hard material)
      <li>new multipass depth = 110/100 * 6 / roundedcuts
         <pre> 110 / 100 * 6 / 4 = 1.65mm</pre>
      <li>Set multipass depth to 1.65 to achieve 4 equal passes.
      </ol>
   <dt>Default_stepover
      <dd>The default percentage of the tool diameter to stepover in pockets and in 3D cuts.
      Tool manufactuers discourage values between 30 and 70% as this shortens tool life, 
      so for soft material use 70 or more and for hard materials use 30% or less.
   <dt>Min_z 
      <dd>Set this to negative (-) your Z travel.   G-code will never contain Z travel more than this figure.
   <dt>Max_z
      <dd>Set this to your Z travel. G-code will never contain Z travel more than this figure.
   <dt id="comments">Comments use Bracket(true) or semicolon(false)
      <dd>Most CNC controllers accept comments in the form  of bracketed text, like this<br>
         <i>(this is a G-code comment)</i><br>
         but some prefer to have comments with semicolons, like this<br>
         <i>; alternate comment format</i><br>
         Use this option to select what you need for your controller.<br>
         <b>NOTE:</b>  The G-code previewer included with SketchUcam DOES NOT understand semicolon comments.
         If you need to use them, do not turn on 'Show Gplot after G-code generation' in the parameters dialog.<br>
         <b>NOTE 2:</b> This option is mostly to cater for GRBL.  Since GRBL does not accept long lines,
         all G-code has been shortened to keep lines as short as possible, and long comments will be folded across
         multiple lines to keep them shorter than 50 characters.
   <dt>Output Comments
      <dd>When this option is set to FALSE, no comments will be output to the G-code file at all.
</dl>
<hr>
<h2><a id="a4">Feature Options</a></h2>
<img alt="" src="images/options-feature.png" style="float: right;">
<dl>
   <dt>Use_exact_path (G61)
      <dd>Set this to true to use G61. This will make the machine come to a complete
         stop when changing directions instead of rounding out square corners. When
         set to false the default for your CNC software will be used. Without G61
         the machine will maintain the best possible speed for the cut even if the
         tool isn't true to the cut path. Rounded corners at low feedrates aren't
         very noticeable but anything over 200 starts to generate large radii so
         that the momentum of the machine can be maintained.<br>
         Turn this off for GRBL and related controllers.
   
   <dt>Use_Incremental_IJ (G91.1)  (<u>Mach3</u> and some other controllers)
      <dd>Set this to true to put a G91.1 in the G-code header.
      <dd>G91.1 sets the G2/G3 arc commands to incremental mode.  
      Some controllers default to absolute mode but since our G-code uses incremental mode,
      we have to change the controller mode to incremental mode by giving a G91.1 command.
      <dd>Note that this is modal, your controller should remember it once you have set it so you probably do not need it in every G-code file.
      <dd>You know you need this command if your controller displays very large circles instead of sort arc segments for curved sections of your drawing.
      <dd>G-plot cannot display a file that contains this code. (yet)
      
   <dt>Always_show_safearea
      <dd>Set this to true, if you want the safe area to always show, when parameters are saved.<br>
         Otherwise the safe area will only show, if its size has been changed.
            
<!--   <dt>Use_pocket_CW
      <dd>Set this true to generate pocket outlines that cut in CW instead of usual CCW direction<br>
         Please research 'climb milling' before changing this.<br>
         Note this is a draw time option, if you change it in the G-code you have to redraw all pocket cuts.
            
   <dt>Use_plunge_CW
      <dd>Set this true to generate plunge hole cuts in CW instead of usual CCW cut direction<br>
         Please research 'climb milling' before changing this.
-->            
   <dt>Use_outfeed 
      <dd>Outfeed: phlatprinters only!<br>
         Set this to true to enable outfeed.  At the end of the job it will feed the material out the front of the
         machine instead of stopping at X0 with the material out the back.<br>
         It will feed to 75% of the material size as given by the safe area settings.<br>
         <b>If this is true then Use_End_Position will be forced to false because they cannot be used at the same time.</b>            
   <dt>Use_vtab_speed_limit
      <dd>Set this to true if you have an older version of Mach that does not slow down
         to the Z maximum speed during helical linear interpolation (G2/3 with Z
         movement A.K.A vtabs on an arc). Vtabs on arcs will cut at the defined plunge rate.
            
   <dt>Profile_save_material_thickness
      <dd>Set this to TRUE to have the material thickness saved and restored in Tool Profiles.
          Profiles that do not contain a material thickness will load just fine.
            
   <dt>Use_Home_Height 
      <dd>Set this true and set the height and the Z will retract to this at the end of the job
         really only useful for overhead gantries.
      <dl>
      <dt>Default_Home_Height 
      <dd>If <i>Use_Home_Height</i> is TRUE, then a G00 Z movement will be issued at the end of the job, using this height for Z.<br>
      If you have material top as Z-zero, it will retract this high above the material.<br>
      If you have table top as Z-Zero, it will retract this high above the table.
      </dd>
      </dl>
      
   <dt>Use_End_Position
      <dd>If this is set true then the values for X and Y below will be used for the final rapid move.<br>
      You can use this to move the gantry out of the way at the end of a job for easy material removal.<br>
      Set <i>Use_Home_Height</i> true as well to enable a Z height that is higher than the safe height used in the G-code.<br>
      NOTE: these values will be limited by your <i>Default_safe_width (X)</i> and <i>Default_safe_height (Y)</i> material size settings.
      <dl>
      <dt>End position X
         <dd>Ending position for X axis.
      <dt>End position Y
         <dd>Ending position for Y axis.
      </dl>   
   
   <dt>Use fuzzy pocket stepover
      <dd>TRUE = recalculate the zigzag stepover to prevent remainders at the end of the cut. <a href="sketchucamtoolbar.html#toolpocket">Read here for details</a>
      <DD>FALSE = use the exact stepover% given in the parameters dialog.
      
   <dt>Limit Ramping Angle to (degrees)
      <dd>0 = no limit on ramping angle.
      <dd>1..45 = limit ramping angle to this value.  This means it will never be more than this angle, but may be less.
      <dd><a href="howto_ramping.html">Read more about ramping</a>
   <dt>Use Ramping
      <dd>Set this to have the default for new drawings to use <a href="howto_ramping.html">ramping</a> for plunge moves.
   <dt>Force all G-codes on for Marlin         
      <dd>FALSE (default) = use optimized G-code output that does not repeat G commands if they are not needed
      <dd>TRUE = force output of G code on all lines, useful for Marlin firmware that requires this.
	<dt>End position Z for G53 <span style="color: red;">(new in V1.5)</span>
      <dd>When home switches are used raising Z to 0 may trigger the limit switch.  
		Use this setting to set an offset for the G53 safety moves so that the limit will not be hit.
		This offset it ALWAYS negative since machine Z=0 is at the top of travel.  
		Thus a move to just short of Z0 is a negative figure.
   </dl>
<hr>
<h2><a id="a5">Hole Feature Options</a></h2>
<img alt="" src="images/options-holefeatures.png" style="float: right;">
   Some options that affect plunge hole feature Gcode generation.<br>
   Note that the Ramping and stepover% settings also affect how hole boring is generated.  <a href="sketchucamtoolbar.html#toolplunge">Read more here</a>
<dl>
   <dt>Use_reduced_safe_height
      <dd>Set this to true to use the minimum of 0.5mm or 1/3 of the usual safe travel height during plunge boring moves.
   <dt>Use fuzzy hole stepover 
      <dd>FALSE = spiral hole boring will use the exact stepover percentage given in the parameters dialog.
         This may create a very small depth of cut for the last cut.
      <dd>TRUE = the stepover will be adjusted to give a whole number of steps of equal size.<br>
         If stepover% is less than 50% then the number of steps will be rounded UP to give a smaller stepover, for hard materials.<br>
         If stepover% is greater than 50% then the number of steps will be rounded DOWN, for soft materials.<br>
         If stepover% is 50%, then no stepover rounding will be performed.
 <dt>Output helixes as quarter arcs
         <dd>TRUE (default) = output spiral boring helixes as quarter arcs, 4 arc segments per revolution.  This prevents
         controllers getting confused about doing a full circle.
         <dd>FALSE = output helixes as a full circle code.  Do not use this with LinuxCNC and test carefully before trusting.
 <dt>Use QuickPeck drill cycle
   <dd>FALSE : plunge hole drill cycles will use full retract to above the surface of the material
   <dd>TRUE :  plunge hole drill cycle will use a small (0.5mm) retract, staying below the material surface.  Effectively just a 'pause'.
      This makes drilling faster, but may not clear chips properly in some materials, use with caution.   
      Do not use with straight flute bits.
   <dt>Use Depth first(true) or Diam first(false)
      <dd>This affects bored holes that are larger than the bit diameter
      <dd>TRUE : use a depth first method.  For each step over of the bit, the hole will be helical bored to depth before doing the next step over.
      <dd>FALSE : use a diameter first method.  First helical bore 2xbitdiam to final depth. Then, for each multipass depth, 
         spiral out to final diameter before doing the next pass.   If multipass is off this will do a full depth spiral cut which is the fastest way to 
         bore a large hole.   For harder materials with multipass this method is recommended.
   <dt><a id="a5a">LASER - plunge hole dwell time (ms)</a>
      <dd>When laser control G-code is generated, plunge holes (of all sizes) become a single burnt dot (unless GRBL mode is true).
      <dd>The depth of the burn will depend on the time spent stationary at that position.
      <dd>Set the default dwell time here, in milliseconds (1000 = 1 second).
      <dd>See more about <a href="sketchucamtoolbar.html#a5a">Laser control</a>
      <dd><i>NOTE: when the dwell time is less than 1 second, say 750 milliseconds, then the Gcode is output as<br>
         G4 P0.75<br>
         and GPLOT does not understand this format and will produce an error message, failing to display the file.<br>
         To see your G-code, set the dwell time to <b>1000</b>, generate G-code, preview, once satisfied, set the dwell to 
         what you really need and generate G-code for cutting.   We are working on modifying GPLOT but this will take some time.</i>
   <dt>LASER - GRBL 1.1 mode (new in 1.4c)
      <dd>GRBL 1.1 features a dedicated laser mode.   In this mode the laser will not be turned on unless a G1/G2/G3 is in motion.
         This means that burning just a spot with a G4 delay will not work.
      <dd>TRUE : G-code is output to draw a small circle, 0.2mm diameter, at the location of the hole.
      <dd>FALSE: G-code is output to burn a hole using a G4 delay at the location of the hole.
      <dd>In both modes, if the hole is larger than bit diameter then a circle of that diameter will be drawn.<br>
      The laser power will also be scaled according to the hole depth setting, as for lines.<br>
      (note that Gplot will not display these holes as circles, but the G-code is correct, this is a Gplot bug)
   
   <dt>LASER- GRBL M4 power control mode
      <dd>GRBL 1.1 has the option to scale laser power according to the acceleration rate.  
		   This prevents over-burning in corners.
      <dd>GRBL uses the M3 command to control the laser in simple on/off mode
      <dd>GRBL uses the M4 command to control the laser in power scaled mode.
      <dd>Set this option true (and the GRBL mode one above) to generate G-code that uses M4 commands.
   
	<dt><a id="a5b">Reduce</a> feedrate in arcs <span style="color: red;">(V1.5)</span>
      <dd>When an arc is similar in radius to the tool, the edge of the tool travels
         much faster than the set feedrate.<br>
       <iframe width="373" height="210" src="https://www.youtube.com/embed/6wLU97gVo5k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>			
      <dd>This option will scale the feedrate down in arcs to compensate for the circumferential speed difference.
		<dd>Minimum scale is 10% of the feedrate. If the scale is less than 10% then 10% of the feedrate is used.
		<dd>Maximum scale is 80% of the feedrate. If the scale is greater than 80% then the full feedrate is used.
		<dd>This will affect 'inlets' on outside cuts, ie rounded outside corners will not be feedrate adjusted.
		<dd>On inside cuts rounded corners will be adjusted but an inlet will not be adjusted.
      <dd>Plunge holes with diameter larger than the bit will use scaled feedrates for each diameter that is cut.
         
</dl>   
   
   <hr>
<h2><a id="a6">File Options</a></h2>
<img alt="" src="images/options-file.png" style="float: right;">
   Some options that affect saving G-code files.
<dl>
   <dt>Default_file_name
      <dd>The default G-code file name, with extension
   <dt>Default_file_ext
      <dd>The default extension to use for G-code files.  This will be added to the name if you do not give an extension in the save dialog.
   <dt>Default_directory_name
      <dd>The default directory to save G-code into.  Make sure it exists!
   <dt>G-code plotter program
      <dd>By setting a path to a program that can display G-code files you can use any program that takes 
         a G-code file as a parameter for preview.
      <dd>Set this to 'default' to use the supplied Gplot.exe preview program
      <dd>Set it to the full path and filename of an alternative G-code previewer that takes the name of the G-code file as the first parameter.
</dl>      


<br clear=all>
</div>
<hr>
</div>
</body>
</html>